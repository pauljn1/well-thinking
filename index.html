<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowpoint - Éditeur de Présentations</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Barre de navigation supérieure -->
        <header class="top-bar">
            <div class="logo">
                <a href="home.html" class="back-btn" title="Retour à l'accueil">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <i class="fas fa-window-restore"></i>
                <span>Flowpoint</span>
            </div>
            <div class="toolbar">
                <div class="tool-group">
                    <button class="tool-btn" id="addTextBtn" title="Ajouter du texte">
                        <i class="fas fa-font"></i>
                    </button>
                    <button class="tool-btn" id="addImageBtn" title="Ajouter une image">
                        <i class="fas fa-image"></i>
                    </button>
                    <button class="tool-btn" id="addShapeBtn" title="Ajouter une forme">
                        <i class="fas fa-shapes"></i>
                    </button>
                </div>
                <div class="separator"></div>
                <div class="tool-group">
                    <select id="fontSelect" class="font-select">
                        <option value="Inter">Inter</option>
                        <option value="Arial">Arial</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                    <select id="fontSizeSelect" class="font-size-select">
                        <option value="12">12</option>
                        <option value="14">14</option>
                        <option value="16">16</option>
                        <option value="18">18</option>
                        <option value="24" selected>24</option>
                        <option value="32">32</option>
                        <option value="48">48</option>
                        <option value="64">64</option>
                        <option value="72">72</option>
                    </select>
                </div>
                <div class="separator"></div>
                <div class="tool-group">
                    <button class="tool-btn" id="boldBtn" title="Gras">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button class="tool-btn" id="italicBtn" title="Italique">
                        <i class="fas fa-italic"></i>
                    </button>
                    <button class="tool-btn" id="underlineBtn" title="Soulign�">
                        <i class="fas fa-underline"></i>
                    </button>
                </div>
                <div class="separator"></div>
                <div class="tool-group">
                    <input type="color" id="textColorPicker" class="color-picker" value="#1e1e1e" title="Couleur du texte">
                    <input type="color" id="bgColorPicker" class="color-picker" value="#ffffff" title="Couleur de fond">
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" id="exportBtn">
                    <i class="fas fa-download"></i>
                    Exporter
                </button>
                <button class="btn btn-primary" id="presentBtn">
                    <i class="fas fa-play"></i>
                    Présenter
                </button>
            </div>
        </header>

        <div class="main-content">
            <!-- Panneau latéral des slides -->
            <aside class="slides-panel">
                <div class="panel-header">
                    <h3>Diapositives</h3>
                    <button class="add-slide-btn" id="addSlideBtn" title="Ajouter une diapositive">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <!-- Onglets de vue -->
                <div class="view-tabs">
                    <button class="view-tab active" id="listViewBtn" title="Vue liste">
                        <i class="fas fa-list"></i>
                    </button>
                    <button class="view-tab" id="treeFullscreenBtn" title="Arborescence plein écran">
                        <i class="fas fa-project-diagram"></i>
                    </button>
                </div>
                <!-- Vue liste normale -->
                <div class="slides-list" id="slidesList">
                    <!-- Les miniatures des slides seront ajoutées ici dynamiquement -->
                </div>
            </aside>

            <!-- Zone d'édition principale -->
            <main class="editor-area">
                <div class="canvas-container">
                    <div class="slide-canvas" id="slideCanvas">
                        <!-- Le contenu de la slide sera ajouté ici -->
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="nav-btn" id="prevSlide" title="Slide précédente">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span class="slide-counter" id="slideCounter">1 / 1</span>
                    <button class="nav-btn" id="nextSlide" title="Slide suivante">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <!-- Boutons de navigation sur le canvas -->
                <div class="canvas-nav-arrows">
                    <button class="canvas-arrow arrow-left" id="canvasArrowLeft" title="Aller à la slide précédente">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button class="canvas-arrow arrow-right" id="canvasArrowRight" title="Aller à la slide suivante">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </main>

            <!-- Panneau des propriétés -->
            <aside class="properties-panel" id="propertiesPanel">
                <div class="panel-header">
                    <h3>Propriétés</h3>
                </div>
                <div class="properties-content" id="propertiesContent">
                    <div class="property-section">
                        <h4>Diapositive</h4>
                        <div class="property-row">
                            <label>Fond</label>
                            <input type="color" id="slideBgColor" value="#ffffff">
                        </div>

                    </div>
                    <div class="property-section element-properties" id="elementProperties" style="display: none;">
                        <h4>Élément sélectionné</h4>
                        <div class="property-row text-content-row" id="textContentRow" style="display: none;">
                            <label>Contenu</label>
                            <textarea id="elemTextContent" rows="3" placeholder="Entrez votre texte..."></textarea>
                        </div>
                        <div class="property-row">
                            <label>Position X</label>
                            <input type="number" id="elemX" value="0">
                        </div>
                        <div class="property-row">
                            <label>Position Y</label>
                            <input type="number" id="elemY" value="0">
                        </div>
                        <div class="property-row">
                            <label>Largeur</label>
                            <input type="number" id="elemWidth" value="100">
                        </div>
                        <div class="property-row">
                            <label>Hauteur</label>
                            <input type="number" id="elemHeight" value="100">
                        </div>

                        <button class="btn btn-danger" id="deleteElement">
                            <i class="fas fa-trash"></i>
                            Supprimer
                        </button>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Modal pour les formes -->
    <div class="modal" id="shapeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Choisir une forme</h3>
                <button class="close-modal" id="closeShapeModal">&times;</button>
            </div>
            <div class="shapes-grid">
                <button class="shape-option" data-shape="rectangle">
                    <div class="shape-preview rectangle"></div>
                    <span>Rectangle</span>
                </button>
                <button class="shape-option" data-shape="circle">
                    <div class="shape-preview circle"></div>
                    <span>Cercle</span>
                </button>
                <button class="shape-option" data-shape="triangle">
                    <div class="shape-preview triangle"></div>
                    <span>Triangle</span>
                </button>
                <button class="shape-option" data-shape="star">
                    <div class="shape-preview star"></div>
                    <span>Étoile</span>
                </button>
                <button class="shape-option" data-shape="arrow">
                    <div class="shape-preview arrow"></div>
                    <span>Flèche</span>
                </button>
                <button class="shape-option" data-shape="line">
                    <div class="shape-preview line"></div>
                    <span>Ligne</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal pour l'ajout d'image -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ajouter une image</h3>
                <button class="close-modal" id="closeImageModal">&times;</button>
            </div>
            <div class="image-upload-area">
                <input type="file" id="imageInput" accept="image/*" hidden>
                <label for="imageInput" class="upload-label">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Cliquez pour sélectionner une image</span>
                    <span class="upload-hint">ou glissez-déposez ici</span>
                </label>
                <div class="url-input-group">
                    <span class="divider-text">ou</span>
                    <input type="text" id="imageUrlInput" placeholder="Collez l'URL d'une image...">
                    <button class="btn btn-primary" id="addImageFromUrl">Ajouter</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mode présentation -->
    <div class="presentation-mode" id="presentationMode">
        <div class="presentation-slide" id="presentationSlide"></div>
        <div class="presentation-controls">
            <button class="pres-nav-btn" id="presPrev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <span class="pres-counter" id="presCounter">1 / 1</span>
            <button class="pres-nav-btn" id="presNext">
                <i class="fas fa-chevron-right"></i>
            </button>
            <button class="pres-exit-btn" id="presExit">
                <i class="fas fa-times"></i>
                Quitter
            </button>
        </div>
    </div>

    <!-- Mode Arborescence Plein Écran -->
    <div class="tree-fullscreen" id="treeFullscreen">
        <div class="tree-header">
            <div class="tree-title">
                <i class="fas fa-project-diagram"></i>
                <span>Arborescence des slides</span>
            </div>
            <div class="tree-toolbar">
                <button class="tree-tool-btn primary" id="addSlideTreeBtn" title="Ajouter une slide">
                    <i class="fas fa-plus"></i> Nouvelle slide
                </button>
                <button class="tree-tool-btn" id="connectModeBtn" title="Mode connexion">
                    <i class="fas fa-link"></i> Connecter
                </button>
                <button class="tree-tool-btn" id="resetTreeBtn" title="Réorganiser">
                    <i class="fas fa-th"></i> Réorganiser
                </button>
                <button class="tree-tool-btn danger" id="clearConnectionsBtn" title="Effacer connexions">
                    <i class="fas fa-unlink"></i>
                </button>
            </div>
            <button class="tree-close-btn" id="closeTreeBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Canvas principal -->
        <div class="tree-canvas" id="treeCanvas">
            <svg class="tree-svg" id="treeSvg"></svg>
            <div class="tree-nodes" id="treeNodes"></div>
        </div>
        
        <!-- Barre d'aide -->
        <div class="tree-help">
            <span><i class="fas fa-mouse-pointer"></i> Glisser pour déplacer</span>
            <span><i class="fas fa-link"></i> Cliquer sur les points pour connecter</span>
            <span><i class="fas fa-hand-pointer"></i> Double-clic pour éditer</span>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
