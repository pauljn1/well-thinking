<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ADELIE LA BOSS ‚Äì PowerPoint Builder</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<header>
    <h1><i class="fa-solid fa-sliders"></i> ADELIE LA BOSS</h1>
</header>

<main>

    <!-- BARRE LATERALE -->
    <aside id="toolbar">
        <div class="tool-title">Projet</div>

        <button class="tool-btn active">
            <i class="fa-solid fa-layer-group"></i>
            Slides
        </button>

        <button class="tool-btn">
            <i class="fa-solid fa-eye"></i>
            Aper√ßu
        </button>

        <button class="tool-btn">
            <i class="fa-solid fa-download"></i>
            Exporter
        </button>

        <button class="tool-btn" id="btn-new-project">
            <i class="fa-solid fa-plus"></i>
            Nouveau projet
        </button>

    </aside>

    <!-- ZONE CENTRALE -->
    <section id="canvas-container">

        <!-- ACTIONS -->
        <div id="canvas-actions">
            <button id="btn-add"><i class="fa-solid fa-plus"></i> Nouvelle slide</button>
            <button id="btn-duplicate"><i class="fa-solid fa-copy"></i> Dupliquer</button>
            <button id="btn-edit"><i class="fa-solid fa-pen"></i> Modifier</button>
            <button id="btn-delete"><i class="fa-solid fa-trash"></i> Supprimer</button>
        </div>

        <!-- SLIDES -->
        <div class="slide" style="top:120px; left:120px;">
            <div class="slide-header">
                <span>Slide </span>
                <i class="fa-solid fa-grip"></i>
            </div>
        </div>

        <div class="slide" style="top:120px; left:420px;">
            <div class="slide-header">
                <span>Slide </span>
                <i class="fa-solid fa-grip"></i>
            </div>

        </div>

        <div class="slide" style="top:120px; left:720px;">
            <div class="slide-header">
                <span>Slide </span>
                <i class="fa-solid fa-grip"></i>
            </div>
        </div>

    </section>

</main>

</body>
</html>

<script>
let slideCount = document.querySelectorAll(".slide").length;
let selectedSlide = null;

/* =========================
   SELECTION DES SLIDES
========================= */
document.addEventListener("click", (e) => {
    const slide = e.target.closest(".slide");

    document.querySelectorAll(".slide").forEach(s => {
        s.style.outline = "none";
    });

    if (slide) {
        selectedSlide = slide;
        slide.style.outline = "3px solid var(--primary)";
    } else {
        selectedSlide = null;
    }
});

/* =========================
   AJOUT SLIDE
========================= */
document.getElementById("btn-add").addEventListener("click", () => {
    slideCount++;

    const slide = document.createElement("div");
    slide.className = "slide";
    slide.style.top = "300px";
    slide.style.left = "500spx";

    slide.innerHTML = `
        <div class="slide-header">
            <span>Slide </span>
            <i class="fa-solid fa-grip"></i>
        </div>
    `;

    document.getElementById("canvas-container").appendChild(slide);
});

/* =========================
   SUPPRESSION SLIDE
========================= */
document.getElementById("btn-delete").addEventListener("click", () => {
    if (!selectedSlide) {
        alert("S√©lectionne une slide √† supprimer üôÇ");
        return;
    }

    selectedSlide.remove();
    selectedSlide = null;
});

// SUPPRESSION AVEC TOUCHE DELETE
document.addEventListener("keydown", (e) => {
    // V√©rifie si une slide est s√©lectionn√©e
    if (!selectedSlide) return;

    // e.key peut √™tre "Delete" ou "Backspace"
    if (e.key === "Delete" || e.key === "Backspace") {
        selectedSlide.remove();
        selectedSlide = null;
    }
});
/* =========================
   DUPLIQUER LA SLIDE SELECTIONN√âE
========================= */

document.getElementById("btn-duplicate").addEventListener("click", () => {
    if (!selectedSlide) {
        alert("S√©lectionne une slide √† dupliquer üôÇ");
        return;
    }

    // Clone la slide
    const clone = selectedSlide.cloneNode(true);

    // D√©caler l√©g√®rement la position pour qu'on voie le clone
    const left = parseInt(selectedSlide.style.left || 0);
    const top = parseInt(selectedSlide.style.top || 0);
    clone.style.left = (left + 40) + "px";
    clone.style.top = (top + 40) + "px";

    // Ajouter le clone au canvas
    document.getElementById("canvas-container").appendChild(clone);

    // Mettre √† jour la s√©lection pour le clone
    document.querySelectorAll(".slide").forEach(s => s.style.outline = "none");
    selectedSlide = clone;
    clone.style.outline = "3px solid var(--primary)";
});
/* =========================
   NOUVEAU PROJET
========================= */
document.getElementById("btn-new-project").addEventListener("click", () => {
    const canvas = document.getElementById("canvas-container");

    // Supprime toutes les slides
    canvas.querySelectorAll(".slide").forEach(slide => slide.remove());

    // R√©initialise la s√©lection
    selectedSlide = null;

    // Ajoute une slide initiale vide
    const initialSlide = document.createElement("div");
    initialSlide.className = "slide";
    initialSlide.style.top = "120px";
    initialSlide.style.left = "120px";
    initialSlide.innerHTML = `
        <div class="slide-header">
            <span></span>
            <i class="fa-solid fa-grip"></i>
        </div>
    `;
    canvas.appendChild(initialSlide);
});
/* =========================
   DRAG & DROP SLIDES
========================= */
let isDragging = false;
let offsetX, offsetY;

document.addEventListener("mousedown", (e) => {
    const header = e.target.closest(".slide-header");
    if (!header) return;

    selectedSlide = header.parentElement;
    isDragging = true;

    const rect = selectedSlide.getBoundingClientRect();
    offsetX = e.clientX - rect.left;
    offsetY = e.clientY - rect.top;

    selectedSlide.style.zIndex = 1000;
});

document.addEventListener("mousemove", (e) => {
    if (!isDragging || !selectedSlide) return;

    const canvas = document.getElementById("canvas-container");
    const canvasRect = canvas.getBoundingClientRect();

    selectedSlide.style.left = (e.clientX - canvasRect.left - offsetX) + "px";
    selectedSlide.style.top = (e.clientY - canvasRect.top - offsetY) + "px";
});

document.addEventListener("mouseup", () => {
    isDragging = false;
    if (selectedSlide) selectedSlide.style.zIndex = "";
});




</script>